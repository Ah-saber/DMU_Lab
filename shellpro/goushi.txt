#!/bin/bash
# 输出学生考勤情

filename="./01-cnet/"
echo $filename

list=($(ls ${filename}))

echo ${list[1]}

length=${#list[@]}
set length
echo $length

student=()
for i in $(seq 0 9999)
do
    student[$i]=0
done
set student
echo ${list[1]}

for file in "${list[@]}"
do
    tail -n +3 "${filename}${file}" | awk '{print $1}' | uniq | sort | while read -r studentname
    do
        if [ "$studentname" = "buyhorse" ]
        then
            continue
        fi
        id=$(echo "$studentname" | sed 's/^cnet0*//')
        index=$(expr "$id")
        #echo $inde:
        if [ "$index" -eq 2948 ]
        then
            echo "now goushi:${student[$index]}"
        fi
        if [ "$index" -ge 0 -a "$index" -le 10000 ]
        then
           let "student[$index]=student[$index]+1"
           echo ${student[$index]}
           # echo "ignore"
        fi
    done
done

for i in $(seq 0 9999)
do
    if [ $i -ne 2948 -a ${student[$i]} -gt 0 ]
    then
        echo "studentname:$i  attendace: ${student[$i]}"
    fi
done

echo ${student[2948]}




